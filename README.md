<div align="center">

# GeoNamesCN

**English** | [**简体中文**](README_zh-CN.md)  

![GeoNamesCN](https://socialify.git.ci/CZAsTc/GeoNamesCN/image?description=1&font=Inter&forks=1&issues=1&language=1&name=1&owner=1&pulls=1&stargazers=1&theme=Auto)

![GitHub Repo Size](https://img.shields.io/github/repo-size/CZAsTc/GeoNamesCN?style=for-the-badge)
[![GitHub Release (with filter)](https://img.shields.io/github/v/release/CZAsTc/GeoNamesCN?style=for-the-badge)](https://github.com/CZAsTc/GeoNamesCN/releases/latest)
[![GitHub All Releases](https://img.shields.io/github/downloads/CZAsTc/GeoNamesCN/total?style=for-the-badge&color=violet)](https://github.com/CZAsTc/GeoNamesCN/releases)
[![GitHub License](https://img.shields.io/github/license/CZAsTc/GeoNamesCN?style=for-the-badge)](https://github.com/CZAsTc/GeoNamesCN/blob/main/LICENSE)

</div>

## GeoNamesCN

GeoNamesCN is a project designed to download, process, and filter place name data for Chinese regions. It integrates data from GeoNames, uses aria2 for efficient downloads, and leverages OpenCC for text conversion.

## Features
- Parallel download of large datasets  
- Traditional Chinese to Simplified Chinese conversion  
- Easy data filtering and transformation  

## Dependencies
- Python 3.9 or higher (recommended for better performance)  
- aria2 (for parallel downloads)  
- 7-Zip (Windows only, for extraction)
- OpenCC (for text conversion)  
- polars (for data handling)  
- requests (for HTTP interactions)  

## Usage
### 1. Download from Releases
For most users, the easiest way to get the latest processed data is to download the ready-made files directly from the [latest release](https://github.com/CZAsTc/GeoNamesCN/releases/latest). Place the `alternateNamesV2.parquet` in your `output/` folder (or any directory) for immediate use.

### 2. Local Installation
If you prefer to run the process locally, refer to the [Installation](#installation) section below. After installing dependencies, go to the project folder and run:

```bash
cd GeoNamesCN
python main.py
```

The script will process the data, store outputs in the `output` or `upload` folder, and generate `alternateNamesV2.parquet`.

### 3. Using GitHub Actions
Developers can also configure the GitHub Actions workflow found in `.github/workflows/main.yml`. It will:
1. Compare ETag values to check if data is up-to-date.  
2. Download and process the GeoNames data using `main.py`.  
3. Upload the resulting Parquet file to the `download` branch and Releases.

### Parquet Format and Example
The Parquet file generated by this project generally contains:
- `geoname_id`: Unique identifier for each location  
- `zh_name`: The processed Chinese name  

Example of reading the file using polars:

```python
import polars as pl

df = pl.read_parquet("output/alternateNamesV2.parquet")
print(df.head())
```

## Installation
### Windows
1. Install Python 3.9 or higher from the official website.  
2. Install [aria2](https://aria2.github.io/) and [7-Zip](https://www.7-zip.org/) for essential functionality.  
3. Clone this repository:
   ```bash
   git clone https://github.com/CZAsTc/GeoNamesCN.git
   ```
4. Enter the project folder:
   ```bash
   cd GeoNamesCN
   ```
5. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

### Linux / macOS
1. Ensure Python 3.9 or higher is installed.  
2. Install [aria2](https://aria2.github.io/) using your package manager (e.g., `sudo apt install aria2` on Ubuntu).  
3. Clone this repository:
   ```bash
   git clone https://github.com/CZAsTc/GeoNamesCN.git
   ```
4. Enter the project folder:
   ```bash
   cd GeoNamesCN
   ```
5. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

## How It Works
1. Downloads GeoNames data via aria2, speeding up data transfer.  
2. Checks ETag to only re-download when the dataset updates.  
3. Uses OpenCC for text conversion (e.g., Traditional to Simplified Chinese).  
4. Outputs processed data in Parquet format.  

## Contribution Guide
Contributions are welcome. Feel free to open a pull request after reviewing [`.github/CONTRIBUTING.md`](.github/CONTRIBUTING.md) for guidelines on how to contribute.

## Code of Conduct
This project has adopted a Code of Conduct to help create a welcoming, inclusive, and productive community.  
Please see [CODE_OF_CONDUCT.md](.github/CODE_OF_CONDUCT.md) for more information.

## Security
We take security issues seriously. If you discover any vulnerability or potential exploit, please review our 
[SECURITY.md](.github/SECURITY.md) for guidelines on how to report it responsibly.

## License
- The code is released under the MIT License. See the [LICENSE](LICENSE) file.  
- [GeoNames Gazetteer data](https://download.geonames.org/export/dump/readme.txt) is under a [Creative Commons Attribution 4.0 License](https://creativecommons.org/licenses/by/4.0/).   

## Acknowledgments
- [GeoNames](http://www.geonames.org/) for providing the data  
- All contributors and the open-source community for their support!  
